var materialCards=function(){"use strict";var e={version:"1.0.1",escapeHTML:function(e){if(null===e)return null;if(void 0!==e){if("object"==typeof e)try{e=JSON.stringify(e)}catch(e){}try{return apex.util.escapeHTML(String(e))}catch(a){return(e=String(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}},loader:{start:function(e){try{apex.util.showSpinner($(e))}catch(s){var a=$("<span></span>");a.attr("id","loader"+e),a.addClass("ct-loader fa-stack fa-3x");var t=$("<i></i>");t.addClass("fa fa-circle fa-stack-2x"),t.css("color","rgba(121,121,121,0.6)");var r=$("<i></i>");r.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),r.css("animation-duration","1.8s"),a.append(t),a.append(r),$(e).append(a)}},stop:function(e){$(e+" > .u-Processing").remove(),$(e+" > .ct-loader").remove()}},jsonSaveExtend:function(e,a){var t={};if("string"==typeof a)try{a=JSON.parse(a)}catch(e){console.error("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.error(e),console.error(a)}else t=a;try{t=$.extend(!0,e,a)}catch(a){console.error("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.error(a),t=e,console.error(t)}return t},noDataMessage:{show:function(e,a){var t=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0").addClass("nodatafoundmessage"),r=$("<div></div>"),s=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");r.append(s);var n=$("<span></span>").text(a).css("display","block").css("color","#707070").css("font-size","12px");t.append(r).append(n),$(e).append(t)},hide:function(e){$(e).children(".nodatafoundmessage").remove()}}};return{initialize:function(a,t,r,s,n,i,d){function o(t){v.empty(),t.row&&t.row.length>0?function(t,r){if(t&&t.length>0){var s=c(v),n=0;$.each(t,function(t,i){n+=A.cardWidth,!1!==d&&(i.CARD_ICON=e.escapeHTML(i.CARD_ICON),i.CARD_ICON_COLOR=e.escapeHTML(i.CARD_ICON_COLOR),i.CARD_HEADER_STYLE=e.escapeHTML(i.CARD_HEADER_STYLE),i.CARD_TITLE=e.escapeHTML(i.CARD_TITLE),i.CARD_VALUE=e.escapeHTML(i.CARD_VALUE),i.CARD_FOOTER=e.escapeHTML(i.CARD_FOOTER)),i.CARD_TYPE?"icon"===i.CARD_TYPE.toLowerCase()?p(t,s,i,r):function(e,t,r,s,n){var i="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",d={fullWidth:!0,chartPadding:{bottom:-12,top:28,right:30,left:-5}},o={};if(n&&"string"==typeof n)try{o=JSON.parse(n)}catch(e){console.log("Error while try to parse CARD_CHART_CONFIG: "+e+n)}else o=n;$.extend(!0,d,o);var c="ct-chart-"+a+e,l=$("<div></div>");l.addClass("s-g-col-"+s.cardWidth);var p=$("<div></div>");p.addClass("at-card");var C=$("<div></div>");C.addClass("card-header card-chart"),C.attr("style",r.CARD_HEADER_STYLE||i);var A=$("<div></div>");A.addClass("ct-chart"),A.attr("id",c),C.append(A),p.append(C);var v=$("<div></div>");v.addClass("card-content");var f=void 0!=r.CARD_TITLE&&r.CARD_TITLE.length>0?r.CARD_TITLE:"";v.append('<p class="category">'+f+"</p>");var h=void 0!=r.CARD_VALUE&&r.CARD_VALUE.length>0?r.CARD_VALUE:"-";v.append('<h2 class="title">'+h+"</h2>"),p.append(v);var R=$("<div></div>");R.addClass("card-footer");var g=$("<div></div>");r.CARD_FOOTER&&((g=$("<div></div>")).addClass("stats"),g.append(r.CARD_FOOTER));if(R.append(g),p.append(R),l.append(p),r.CARD_LINK){var _=$("<a></a>");_.attr("href",r.CARD_LINK),_.append(l),t.append(_)}else t.append(l);var D;if(r.CARD_CHART_DATA){var T={};if("string"==typeof r.CARD_CHART_DATA)try{T=JSON.parse(r.CARD_CHART_DATA)}catch(e){console.log("Error while try to parse CARD_CHART_DATA"),console.log(e),console.log(r.CARD_CHART_DATA)}else T=r.CARD_CHART_DATA;switch(r.CARD_TYPE.toLowerCase()){case"chart-line":D=new Chartist.Line("#"+c,T,d);break;case"chart-bar":D=new Chartist.Bar("#"+c,T,d);break;case"chart-pie":d.chartPadding={},D=new Chartist.Pie("#"+c,T,d);break;default:console.log("No valid Chart type")}var u=void 0!=r.CARD_ICON_COLOR&&r.CARD_ICON_COLOR.length>0?r.CARD_ICON_COLOR:"white";D.on("draw",function(e){var a={};if(r.CARD_CHART_DATA&&"string"==typeof r.CARD_CHART_DATA)try{a=JSON.parse(r.CARD_CHART_DATA)}catch(e){console.log("Error while try to parse CARD_CHART_CONFIG: "+e+n)}else a=r.CARD_CHART_DATA;a.colors&&(u=a.colors[e.index]||a.colors[0]),"bar"!==e.type&&"line"!==e.type&&"point"!==e.type||(d.strokeWidth?e.element.attr({style:"stroke:  "+u+"; stroke-width:"+d.strokeWidth+"px;"}):e.element.attr({style:"stroke:  "+u})),"slice"===e.type&&e.element.attr({style:"fill: "+u+"; fill-opacity: "+(a.colors?.6:(e.index%10+2)/10)}),"area"===e.type&&e.element.attr({style:"fill: "+u+"; fill-opacity: "+(e.index%10+2)/10}),!0===d.donut&&(d.sliceWidth&&$(A).find(".ct-slice-donut").css("stroke-width",d.sliceWidth.toString()+"px"),e.element.attr({style:"stroke-opacity: "+(-e.index%10+10)/10+"; stroke:  "+u}),$(A).find(".ct-label").css("stroke","initial"),$(A).find(".ct-label").css("fill",a.colors?"white":u)),$(A).find(".ct-slice-pie").attr("stroke",a.colors?"rgba(0,0,0,0)":u),$(A).find(".ct-slice-donut").attr("stroke",u),$(A).find(".ct-label").css("color",a.colors?"white":u),$(A).find(".ct-grid").css("stroke",a.colors?"white":u),$(A).find(".ct-grid").css("opacity",".4")})}}(t,s,i,r,i.CARD_CHART_CONFIG):p(t,s,i,r),n>=12&&(s=c(v),n=0)})}}(t.row,A):(v.css("min-height",""),e.noDataMessage.show(v,r))}function c(e){var a=$("<div></div>");return a.addClass("s-g-row"),e.append(a),a}function l(){if(t){e.loader.start(v);var a=n;apex.server.plugin(t,{pageItems:a},{success:o,error:function(e){v.empty(),console.log(e.responseText)},dataType:"json"})}else try{e.loader.start(v),setTimeout(function(){o(dataJSON)},500)}catch(e){console.log("need data json"),console.log(e)}}function p(e,a,t,r){var s="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",n=$("<div></div>");n.addClass("s-g-col-"+r.cardWidth);var i=$("<div></div>");i.addClass("at-card at-card-stats");var d=$("<div></div>");if(d.addClass("card-header"),t.CARD_ICON){var o=$("<i></i>");o.addClass("fa "+t.CARD_ICON);var c=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";o.attr("style","color:"+c),d.append(o)}d.attr("style",t.CARD_HEADER_STYLE||s),i.append(d);var l=$("<div></div>");l.addClass("card-content");var p=void 0!=t.CARD_TITLE?t.CARD_TITLE:"";l.append('<p class="category">'+p+"</p>");var C=void 0!=t.CARD_VALUE?t.CARD_VALUE:"";l.append('<h2 class="title">'+C+"</h2>"),i.append(l);var A=$("<div></div>");A.addClass("card-footer");var v=$("<div></div>");if(t.CARD_FOOTER&&((v=$("<div></div>")).addClass("stats"),v.append(t.CARD_FOOTER)),A.append(v),i.append(A),n.append(i),t.CARD_LINK){var f=$("<a></a>");f.attr("href",t.CARD_LINK),f.append(n),a.append(f)}else a.append(n)}var C=$("#"+a);if(C.length>0){var A={};A=e.jsonSaveExtend({cardWidth:4,refresh:0},s);var v=function(e){var a=$("<div></div>");return a.addClass("s-g-container"),a.css("min-height","170px"),e.append(a),a}(C);l();try{apex.jQuery("#"+i).bind("apexrefresh",function(){0==v.children("span").length&&l()})}catch(e){console.log("Can't bind refresh event on "+i+". Apex is missing"),console.log(e)}A.refresh>0&&setInterval(function(){0==v.children("span").length&&l()},1e3*A.refresh)}else console.log("Can't find parentID: "+a)}}}();